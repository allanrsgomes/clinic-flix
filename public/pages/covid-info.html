<html lang="pt">

<head>
    <meta charset="utf-8" name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="stylesheet" href="../assets/css/base.css" type="text/css">
    <link rel="stylesheet" href="../assets/css/container.css" type="text/css">
    <link rel="stylesheet" href="../assets/css/text.css" type="text/css">
    <link rel="stylesheet" href="../assets/css/button.css" type="text/css">
    <link rel="stylesheet" href="../assets/css/header.css" type="text/css">
    <link rel="stylesheet" href="../assets/css/accordeon.css" type="text/css">
    <link rel="stylesheet" href="../assets/css/modal.css" type="text/css">
    <link rel="stylesheet" href="../assets/css/agendamento.css" type="text/css">

    <title>Teste COVID-19</title>

    <!-- <script>
        //Verifica se tem o parâmetro do produto definido, caso não tenha entra no if
        if (window.location.search == "") {

            //Redireciona para página de listagem de COVID
            window.location.href = "/panvel/testes-covid.do";
        }
    </script> -->
</head>

<div class="LHWrapperBody">
    <div class="hoverContent">
        <a href="https://api.whatsapp.com/send?phone=555132189000&amp;text=Ol%C3%A1%20" class="button fixedHover"
            target="_blank" rel="noopener">
            <img src="https://cdn1.staticpanvel.com.br/cdn_service/landpages/page-clinic/assets/icons/WhatsApp.png"
                alt="ÍconeWhatsApp">
        </a>
    </div>
    <div class="content-header LHHeaderInfo covid-header" id="LHInfoHeader">
        <div class="top-banner">
            <a href="/panvel/panvelClinic.do"><button class="btnVoltar">Voltar</button></a>
            <img src="https://cdn1.staticpanvel.com.br/cdn_service/landpages/page-clinic/assets/images/Group.png"
                class="clinic-logo">
        </div>
        <div class="header-banner">
            <div class="partner-info">
                <div class="name-info">
                    <h1 class="headerTitle"> </h1>
                    <div class="headerDescription" id='LHProdutoDesc'>
                    </div>
                </div>
                <a class="produtoButton produtoCompra" id="btnCompra"> COMPRAR <i class="fa fa-shopping-basket"
                        aria-hidden="true"></i></a>
            </div>
        </div>
    </div>
    <section class="primaryContent">
        <div class="LHContainer">
            <div class="inner-content default-content">
                <div id="tab-content-wrapper">
                    <ul class="accordeon-list" id="productInfo">
                    </ul>
                    <hr class="blue-separator">
                    <div class="stepListContainer filialPanvel">
                        <ul class="center-text pure-g stepList">
                            <li class="pure-u-1 pure-u-md-1-3">
                                <img src="../assets/images/icons/seringa.png" alt="">
                                <p class="step-title">
                                    1.
                                    Agendar dia e horário
                                </p>
                            </li>
                            <li class="pure-u-1 pure-u-md-1-3">
                                <img src="https://cdn1.staticpanvel.com.br/cdn_service/landpages/page-clinic/assets/images/icons/loja.png"
                                    alt="">
                                <p class="step-title">
                                    2.
                                    Agendar loja para aplicação
                                </p>
                            </li>
                            <li class="pure-u-1 pure-u-md-1-3">
                                <img src="https://cdn1.staticpanvel.com.br/cdn_service/landpages/page-clinic/assets/images/icons/dinheiro.png"
                                    alt="">
                                <p class="step-title">
                                    3.
                                    Agendar o teste
                                </p>
                                <button id="agendarBtn"
                                    onclick="pushButton('clinicButtonComprar', 'Covid-19', 'Testes Covid-19')">Agende
                                    aqui</button>
                            </li>
                        </ul>
                    </div>
                    <hr class="blue-separator">
                </div>
            </div>
        </div>
</div>
</section>

<div id="LHModalOverlay" class="modalAgendamento">

    <!-- Modal Container -->
    <div class="container-modal modal-agendamento pure-u-1 " id="LHModalContent">

        <!-- Modal Header -->
        <div class="header-modal pure-g pure-u-1 pure-u-md-1-2 pure-u-xl-1-2 ">
            <img alt="Icone Calendário" class="img-calendario-modal pure-u-1-8"
                src="../assets/images/modal/icon-feather-calendar.svg">
            <div class="pure-u-1-2 ">
                <span>AGENDAR ESTE SERVIÇO</span>
            </div>

            <img alt="Botão Fechar Modal" src="../assets/images/modal/close.svg" id="btCloseModal"
                class="close pure-u-1-8">
        </div>

        <!-- Modal Conteúdo -->
        <div class="conteudo-modal pure-u-1 pure-u-md-1-2 pure-u-xl-1-2">

            <div>
                <p class="loja-mais-proxima">ENCONTRE UMA LOJA PRÓXIMA DE VOCÊ!</p>
                <p>Selecione o estado e cidade onde você quer realizar este serviço: </p>
            </div>

            <!-- Inputs  -->
            <div class="container-dinamico pure-g">

                <div class="container-inputs-modal pure-g pure-u-1 ">
                    <div class="container-estado-cidade pure-u-1-2 pure-u-sm-1-3">
                        <span class="text-estado-cidade">Estado:</span>
                        <select name="estado" id="optionsEstado" class="input-modal"
                            onchange="EscolherEstado(this.value)">
                            <option value="">Selecione</option>
                            <option value="PR">Paraná</option>
                            <option value="RS">Rio Grande do Sul</option>
                            <option value="SC">Santa Catarina</option>
                            <option value="SP">São Paulo</option>
                        </select>
                    </div>

                    <div class="container-estado-cidade  pure-u-1-2 pure-u-sm-1-3">
                        <span class="text-estado-cidade">Cidade:</span>
                        <select name="cidade" id="optionsCity" class="input-modal" disabled>
                            <option>Selecione</option>
                        </select>
                    </div>

                    <div class="pure-g pure-u-1 pure-u-sm-1-3">
                        <button onclick="Pesquisar(produto)" class="btn-pesquisar-modal">PESQUISAR</button>
                    </div>
                </div>

                <div class="widget-container pure-u-1">
                    <div class="linha-modal"></div>
                    <iframe id="simplyBookIframe"></iframe>
                </div>
            </div>

        </div>

    </div>
</div>


<script src="../assets/scripts/produtosCovid.js"></script>
<script src="../assets/scripts/lib/accordeon.js"></script>
<script src="../assets/scripts/lib/parametros.js"></script>
<script src="../assets/scripts/lib/modal.js"></script>
<script src="../assets/scripts/lib/filiaisHandler.js"></script>
<script src="../assets/scripts/lib/produtoHandler.js"></script>
<script src="../assets/scripts/lib/agendamento.js"></script>


<script>

    //modal automático
    var agendamento = Number(getParameters().agendamento);

    if (agendamento == 1) {
        window.onload = function () {
            const modal = document.querySelector('#LHModalOverlay').style.left = "0px"
        }
    }

    var produto

    //Define qual vai ser o escopo da página atribuindo uma variável que armazena só os itens a serem usados
    const categoriaItens = produtosTestesCovid
    const catAgendamento = produtosTestesCovid
    //Se chegou a executar esse event listener é porque o parâmetro de produto tá definido
    document.addEventListener("DOMContentLoaded", function (event) {

        //Busca nessa variável o produto transformando em int o parâmetro recebido por URL
        produto = categoriaItens.itens.find(({ id }) => id == Number(getParameters().p));
        categoria = catAgendamento
        prenchimentoInterno(produto, categoria);
        initClinicModals();
    });

</script>

</html>